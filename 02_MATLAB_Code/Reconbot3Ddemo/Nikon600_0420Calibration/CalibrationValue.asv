% Initial data
camera = [0 0 0 0 0 0];
origin = [49.7661285400391 496.921806335449 -2691.16369628906 -69.2679681799178 48.6907674079172 -62.9003861608830];
circle_origin = [144.206702859483 263.090388622974 -2886.60626210063 94.0940890622110 -0.399477346626415 -92.1785238713312];

F51 = [142.936767578125 99.8872604370117 -2884.98950195313 -80.4574729013432 -5.92578924829744 -148.262746579105];

Motor4 = [224.670089721680 144.967891693115 -2879.83209228516 -71.2132743828631 35.4526393937436 -72.5316454042061];
Motor5 = [193.263330078125 147.448315429688 -2808.33408203125 -58.3902448820929 -11.2219999074282 -131.955475041130];
Motor3 = [203.999034881592 144.699104309082 -2969.13311767578 -53.2066614062262 20.6568884245527 -65.6327891357357];

Motor1 = [233.419101715088 374.865188598633 -2881.41772460938 -73.7093594829389 -56.2878522420035 -106.247726859603];
Motor2 = [212.452419281006 376.166198730469 -2957.26684570313 57.1546504183299 38.8062037024668 33.9455795422327];
Motor6 = [208.652282714844 523.076370239258 -2830.24755859375 -33.3951254560432 33.1214855591592 -55.7769963316221];

% Tranform to circle_origin
eul = origin(4:6);
tform = eul2tform(eul,'ZYX');
% tform(1:3,4) = -origin(1:3);

invser_tform = inv(tform);
%invser_tform(1:3,4) = -origin(1:3);

Motor1_OriginFrame = invser_tform * [ Motor1(1:3)-origin(1:3), 1 ]';


%% Roll/pitch/yaw to homogenous transform
% roll = circle_origin(4);
% pitch = circle_origin(5);
% yaw = circle_origin(6);

yaw = origin(4);
pitch = origin(5);
roll = origin(6);

r = rotx(yaw) * roty(pitch) * rotz(roll);

circle_originFrame = inv(r) * [ circle_origin(1:3) - origin(1:3) ]'
Motor1_OriginFrame = inv(r) * [ Motor1(1:3) - origin(1:3) ]';
% Motor1_CircleFrame = inv(r) * [ Motor1(1:3) - circle_origin(1:3) ]'
Motor5_OriginFrame = inv(r) * [ Motor5(1:3) - origin(1:3) ]';
F51_OriginFrame = inv(r) * [ F51(1:3) - origin(1:3) ]';

